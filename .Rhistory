psych::principal(df[, c(311:318)], nfactors = 2)
psych::principal(df[, c(290:296)], nfactors = 2)
psych::principal(df[, c(319:326)], nfactors = 2)
psych::principal(df[, c(290:296, 319:326)], nfactors = 2)
psych::principal(df[, c(282:289, 311:318)], nfactors = 2)
psych::principal(df[, c(282:289)], nfactors = 2)
psych::principal(df[, c(311:318)], nfactors = 2)
psych::principal(df[, c(282:289)], nfactors = 2)
psych::principal(df[, c(290:296)], nfactors = 2)
psych::principal(df[, c(319:326)], nfactors = 2)
psych::principal(df[, c(282:289)], nfactors = 2)
psych::principal(df[, c(311:318)], nfactors = 2)
names(df)
df2 <- df %>%
select(c(1:5, 84, 179, 256:ncol(df))) %>%
rename(ALLBUS = ALLBUS_SR, ALLBUS_P = ALLBUS_ORP, ALLBUS_D = ALLBUS_ORD)
prop.table(table(df2$GEN))
prop.table(table(df2$EDU))
desc <- psych::describe(df2)
knitr::kable(desc, digits = 2, align = "c")
turnTableIntoDoc(round(desc, 2), "desc_table.docx")
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x], n.iter = 5000)
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x], n.iter = 5000)
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2]), icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up)
})
round(do.call(rbind, rels_os), 3)
os_items
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x])
#alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2],  omega = omega, icc = icc$results[5, 2]), icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up)
})
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x])
#alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
return(data.frame(alpha = alpha$total[2],  omega = omega, icc = icc$results[5, 2]), icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up)
})
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x])
#alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], omega = omega, icc = icc$results[5, 2]), icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up)
})
rels_os <- lapply(os_items, function(x) {
rels_os <- lapply(os_items, function(x) {
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x])
#alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], omega = omega, icc = icc$results[5, 2], icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up))
})
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x])
#alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], omega = omega, icc = icc$results[5, 2], icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up))
})
round(do.call(rbind, rels_os), 3)
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x], n.iter = 5000)
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2]), icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up)
})
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x], n.iter = 5000)
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2], icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up))
})
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x], n.iter = 5000)
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2], icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up))
})
round(do.call(rbind, rels_os), 3)
rel_talbe <- round(do.call(rbind, rels_os), 3)
rel_table <- round(do.call(rbind, rels_os), 3)
turnTableIntoDoc(rel_table, "rel_table.docx")
rel_table <- round(do.call(rbind, rels_os), 2)
turnTableIntoDoc(rel_table, "rel_table.docx")
rels_otp <- lapply(all_ot_items$P, function(x) {
alpha <- psych::alpha(data[, x])
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2]), icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up)
})
rels_otp <- lapply(all_ot_items$P, function(x) {
alpha <- psych::alpha(data[, x])
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2], icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up))
})
all_ot_items$P
rels_otp <- lapply(all_ot_items$P, function(x) {
alpha <- psych::alpha(data[, x])
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2], icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up))
})
rels_otp <- lapply(all_ot_items$P, function(x) {
alpha <- psych::alpha(data[, x], n.iter = 5000)
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2], icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up))
})
turnTableIntoDoc(rel_table1, "rel_table.docx")
rel_table1 <- round(do.call(rbind, rels_otp), 2)
turnTableIntoDoc(rel_table1, "rel_table.docx")
turnTableIntoDoc(rel_table1, "rel_table1.docx")
turnTableIntoDoc(rel_table, "rel_table.docx")
turnTableIntoDoc(rel_table, "rel_table.docx")
turnTableIntoDoc(rel_table1, "rel_table1.docx")
rel_table <- round(do.call(rbind, rels_os), 2)
turnTableIntoDoc(rel_table, "rel_table.docx")
rels_otd <- lapply(all_ot_items$D, function(x) {
alpha <- psych::alpha(data[, x], n.iter = 5000)
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2], icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up))
})
rel_table2 <- round(do.call(rbind, rels_otd), 2)
turnTableIntoDoc(rel_table2, "rel_table2.docx")
psych::ICC(df[, c("SSDO_D", "SSDO_P")])
icc_results <- data.frame()
lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(p_var, d_var)
return(data.frame(icc = icc))
})
dvs <- grep(".*_(P|D)", names(df2), value = TRUE)[-3]
dv_bases <- gsub("_P$|_D$", "", dvs)
lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(p_var, d_var)
return(data.frame(icc = icc))
})
unique(dv_bases)
sapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(p_var, d_var)
return(data.frame(icc = icc))
})
apply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(p_var, d_var)
return(data.frame(icc = icc))
})
lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(df[, c(p_var, d_var)])
return(data.frame(icc = icc))
})
lapply(unique(dv_bases), function(base) {
print(base)
})
unique(dv_bases)
grep(".*_(P|D)", names(df2), value = TRUE)
lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(df2[, c(p_var, d_var)])
return(data.frame(icc = icc))
})
lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(df2[, c(p_var, d_var)])
return(data.frame(icc = icc[5, 2]))
})
lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(df2[, c(p_var, d_var)])
return(data.frame(icc = icc$results[5, 2]))
})
rel_dp <- lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(df2[, c(p_var, d_var)])
return(data.frame(icc = icc$results[5, 2]))
})
icc_dp <- lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(df2[, c(p_var, d_var)])
return(data.frame(icc = icc$results[5, 2]))
})
icc_table_dp <- round(do.call(rbind, icc_dp), 2)
icc_table_dp
icc_dp <- lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(df2[, c(p_var, d_var)])
return(data.frame(var = base, icc = icc$results[5, 2]))
})
icc_table_dp <- round(do.call(rbind, icc_dp), 2)
icc_dp
icc_table_dp <- round(do.call(rbind, icc_dp), 2)
icc_table_dp <- do.call(rbind, icc_dp)
icc_table_dp
rels_otd
rels_otd
rel_table2
icc_table_dp
icc_dp <- lapply(unique(dv_bases), function(base) {
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
icc <- psych::ICC(df2[, c(p_var, d_var)])
return(data.frame(icc = icc$results[5, 2]))
})
icc_table_dp <- do.call(rbind, icc_dp)
icc_table_dp
names(icc_table_dp) <- unique(dv_bases)
rownames(icc_table_dp) <- unique(dv_bases)
icc_table_dp
icc_table_dp <- round(do.call(rbind, icc_dp), 2)
rownames(icc_table_dp) <- unique(dv_bases)
icc_table_dp
turnTableIntoDoc(icc_table_dp, "icc_table_dp.docx")
dvs <- grep(".*_(P|D)", names(df2), value = TRUE)[-3]
dv_bases <- gsub("_P$|_D$", "", dvs)
unique(dv_bases)
t_test_results <- data.frame()
for(base in unique(dv_bases)){
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
df_long <- df2 %>%
select(all_of(c(p_var, d_var))) %>%
tidyr::pivot_longer(
cols = everything(),
names_to = "group",
values_to = "value"
) %>%
mutate(group = ifelse(group == p_var, "P", "D"))
t_res <- df_long %>%
rstatix::t_test(value ~ group, var.equal = FALSE, paired = TRUE)
d_res <- df_long %>%
rstatix::cohens_d(value ~ group)
levene_res <- df_long %>%
rstatix::levene_test(value ~ group)
combined <- t_res %>%
mutate(effect_size = d_res$effsize,
magnitude = d_res$magnitude,
variable = base,
levene_p = levene_res$p)
t_test_results <- bind_rows(t_test_results, combined)
}
t_test_results <- t_test_results %>% select(variable, everything())
knitr::kable(t_test_results, digits = 3, align = "c")
turnTableIntoDoc(t_test_results, "t_test_table.docx")
t_test_results
turnTableIntoDoc(t_test_results, "t_test_table.docx")
t_test_resu
t_test_results
turnTableIntoDoc(t_test_results, "t_test_table.docx")
dvs <- grep(".*_(P|D)", names(df2), value = TRUE)[-3]
dv_bases <- gsub("_P$|_D$", "", dvs)
unique(dv_bases)
t_test_results <- data.frame()
for(base in unique(dv_bases)){
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
df_long <- df2 %>%
select(all_of(c(p_var, d_var))) %>%
tidyr::pivot_longer(
cols = everything(),
names_to = "group",
values_to = "value"
) %>%
mutate(group = ifelse(group == p_var, "P", "D"))
t_res <- df_long %>%
rstatix::t_test(value ~ group, var.equal = FALSE, paired = TRUE)
d_res <- df_long %>%
rstatix::cohens_d(value ~ group)
levene_res <- df_long %>%
rstatix::levene_test(value ~ group)
combined <- t_res %>%
mutate(effect_size = d_res$effsize,
magnitude = d_res$magnitude,
variable = base,
levene_p = levene_res$p)
t_test_results <- bind_rows(t_test_results, combined)
}
t_test_results
t_test_results <- t_test_results %>% select(variable, everything())
t_test_results <- t_test_results %>% select(variable, everything()) %>% rename(variable = var)
t_test_results <- t_test_results %>% select(variable, everything()) %>% rename(var = variable)
turnTableIntoDoc(t_test_results, "t_test_table.docx")
turnTableIntoDoc(round(t_test_results, 2), "t_test_table.docx")
t_test_results <- t_test_results %>% select(variable, everything()) %>% rename(var = variable) %>% mutate(across(where(is.numeric) & !matches("^p$"), round, digits = 2))
dvs <- grep(".*_(P|D)", names(df2), value = TRUE)[-3]
dv_bases <- gsub("_P$|_D$", "", dvs)
unique(dv_bases)
t_test_results <- data.frame()
for(base in unique(dv_bases)){
p_var <- paste0(base, "_P")
d_var <- paste0(base, "_D")
df_long <- df2 %>%
select(all_of(c(p_var, d_var))) %>%
tidyr::pivot_longer(
cols = everything(),
names_to = "group",
values_to = "value"
) %>%
mutate(group = ifelse(group == p_var, "P", "D"))
t_res <- df_long %>%
rstatix::t_test(value ~ group, var.equal = FALSE, paired = TRUE)
d_res <- df_long %>%
rstatix::cohens_d(value ~ group)
levene_res <- df_long %>%
rstatix::levene_test(value ~ group)
combined <- t_res %>%
mutate(effect_size = d_res$effsize,
magnitude = d_res$magnitude,
variable = base,
levene_p = levene_res$p)
t_test_results <- bind_rows(t_test_results, combined)
}
t_test_results <- t_test_results %>% select(variable, everything()) %>% rename(var = variable) %>% mutate(across(where(is.numeric) & !matches("^p$"), round, digits = 2))
t_test_results
t_test_results <- t_test_results %>%
mutate(p_stars = case_when(
p < 0.001 ~ "***",
p < 0.01  ~ "**",
p < 0.05  ~ "*",
TRUE      ~ ""
))
t_test_results
turnTableIntoDoc(round(t_test_results, 2), "t_test_table.docx")
turnTableIntoDoc(t_test_results, "t_test_table.docx")
rels_os <- lapply(os_items, function(x) {
alpha <- psych::alpha(data[, x], n.iter = 5000)
alpha_ci <- alpha$boot.ci
if(length(x) > 2) {
omega <- psych::omega(data[, x])
omega <- omega$omega.tot
} else {
omega <- 0
}
icc <- psych::ICC(data[, x])
icc_p <- icc$results[5, 6]
icc_ci_low <- icc$results[5, 7]
icc_ci_up <- icc$results[5, 8]
return(data.frame(alpha = alpha$total[2], alpha.ci.low = alpha_ci[1], alpha.ci.up = alpha_ci[3],  omega = omega, icc = icc$results[5, 2], icc_p = icc_p, icc_ci_low = icc_ci_low, icc_ci_up = icc_ci_up))
})
rel_table1
rel_table2
names(df)
nrow(df2)
nrow(df1)
nrow(df)
rnage(df$AGE)
range(df$AGE)
cor.ez(1:3, 5, 256, 268)
cor.ez(df[, c(1:3, 5, 256, 268)])
cor_os <- cor.ez(df[, c(1:3, 5, 256, 268)])
cor_os <- cor.ez(df[, c(1:3, 5, 256, 268)])
cor_os
cor_os_data <- df[, c(1:3, 5, 256, 268)]
cor_os <- cor.ez(cor_os_data)
cor_os_ci <- cor.ez(cor_os_data, cis = TRUE)
turnTableIntoDoc(cor_os, "cor_os.docx")
cor_os_data <- df[, c(1:3, 5, 256:268)]
cor_os <- cor.ez(cor_os_data)
cor_os_ci <- cor.ez(cor_os_data, cis = TRUE)
turnTableIntoDoc(cor_os, "cor_os.docx")
turnTableIntoDoc(cor_os_ci, "cor_os_ci.docx")
install.packages(c("devTools", "roxygen", "usethis"))
setwd("~/Documents/GitHub/ezpz/R:")
usethis::create_package(".")
usethis::create_package("ezpz")
setwd("~/Documents/GitHub/ezpz/R")
setwd("~/Documents/GitHub/ezpz")
devtools::document()
devtools::document()
devtools::install()
devtools::install_github("JanPalnau/ezpz")
